<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard - John's Easy Tech</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        {% include "includes/messages.html" %}
        
        <nav class="admin-nav">
            <a href="{{ url_for('admin_products') }}" class="button">Manage Products</a>
            <a href="{{ url_for('admin_logs') }}" class="button">System Logs</a>
            <a href="{{ url_for('index') }}" class="button">View Site</a>
            <a href="{{ url_for('admin_logout') }}" class="button">Logout</a>
        </nav>

        <h1>Admin Dashboard</h1>

        {% include "admin/security_panel.html" %}
        <div class="dashboard-stats">
            <div class="stat-box">
                <h3>Products</h3>
                <div class="stat-value">{{ products_count }}</div>
                <div class="stat-label">Total Products</div>
            </div>

            {% if orders_count is defined %}
            <div class="stat-box">
                <h3>Orders</h3>
                <div class="stat-value">{{ orders_count }}</div>
                <div class="stat-label">Total Orders</div>
            </div>
            {% endif %}

            <div class="stat-box">
                <h3>System Status</h3>
                <div class="stat-value">
                    <a href="{{ url_for('admin_logs') }}" class="button">View Logs</a>
                </div>
                <div class="stat-label">Monitor system activity</div>
            </div>
        </div>

        <div class="dashboard-actions">
            <div class="action-box">
                <h3>Quick Actions</h3>
                <a href="{{ url_for('admin_products') }}" class="button">Add New Product</a>
                <a href="{{ url_for('admin_logs') }}" class="button">Check System Logs</a>
                {% if orders_count is defined %}
                <a href="{{ url_for('admin_orders') }}" class="button">View Recent Orders</a>
                {% endif %}
            </div>
        </div>

        {% if recent_products %}
        <div class="recent-items">
            <h3>Recently Added Products</h3>
            <div class="products-list">
                {% for product in recent_products %}
                <div class="product-item">
                    <h4>{{ product.name }}</h4>
                    <p class="price">${{ "%.2f"|format(product.price) }}</p>
                    <p class="description">{{ product.description }}</p>
                    <p class="timestamp">Added: {{ product.timestamp }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <div class="system-info">
            <h3>System Information</h3>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">Logs Location:</span>
                    <span class="info-value">logs/easyfixtech.log</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Email:</span>
                    <span class="info-value">{{ EMAIL_ADDRESS }}</span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
